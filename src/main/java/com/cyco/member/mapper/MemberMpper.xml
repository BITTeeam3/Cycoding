<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cyco.member.dao.MemberDao">

	<select id="checkEmail" resultType="integer">
		
		select MEMBER_ID from member where MEMBER_EMAIL = #{email}
	
	</select>
	
	<select id="checkNickName" resultType="integer">
		
		select MEMBER_ID from member where MEMBER_NICKNAME = #{nickName}
	
	</select>
	
	<select id="checkPhone" resultType="integer">
		
		select MEMBER_ID from member where MEMBER_PHONE = #{phone}
	
	</select>

	<insert id="registMember" parameterType="com.cyco.common.vo.MemberVo">
	
		insert into member(MEMBER_ID, MEMBER_EMAIL,MEMBER_PWD,MEMBER_NAME,MEMBER_NICKNAME,MEMBER_PHONE,MEMBER_IMAGE,ENABLED) 
		values (M_SEQ.nextval,#{MEMBER_EMAIL},#{MEMBER_PWD},#{MEMBER_NAME},#{MEMBER_NICKNAME},#{MEMBER_PHONE},'defualt.jpg',1)
		
	</insert>
	
	<select id="getMyDetail" resultType="com.cyco.common.vo.MemberVo">
		
		select  m.MEMBER_ID, m.MEMBER_EMAIL, m.MEMBER_NICKNAME, m.MEMBER_NAME, m.MEMBER_PWD, m.MEMBER_PHONE, m.MEMBER_EMAIL, p.HAVE_POINT
			    from member m left join point p
			    on m.MEMBER_ID=p.MEMBER_ID
			    where member_email=#{useremail}
		
	</select>
	
	<update id="editPersnalInfo">
		
		update member set ${param1}=#{param2} where MEMBER_ID=#{param3}

	</update>
	
</mapper>